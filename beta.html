<!DOCTYPE html>
<!--
Created by LAX1DUDE (do NOT contact)
Ported to Khan Academy by ayunami2000#5250
w/ help from Melvin4life#4876
-->
<html>



  
<head>
  <title>Google</title>
  <link rel="icon" type="image/png" href="https://img.icons8.com/?size=100&id=V5cGWnc9R4xj&format=png&color=000000">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <script src="https://cdn.jsdelivr.net/npm/eag-web-sp@1.0.4/classes1_mod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/eag-web-sp@1.0.4/assets_uri.js"></script>

  <style>
    html, body {
      margin: 0;
      width: 100%;
      height: 100%;
      overflow: hidden; /* IMPORTANT: stops arrow keys/space from scrolling */
      background: black;
    }

    #game_frame {
      width: 100vw;
      height: 100vh;
      outline: none; /* removes focus border */
    }
  </style>

  <script>
    function base64ToUint8Array(base64) {
      eval("function KAInfiniteLoopProtect(){}");
      var binary_string = window.atob(base64);
      var len = binary_string.length;
      var bytes = new Uint8Array(len);
      for (var i = 0; i < len; i++) {
        bytes[i] = binary_string.charCodeAt(i);
      }
      return bytes;
    }

    // Prevent the browser from stealing important keys
    window.addEventListener("keydown", function(e) {
      const blocked = ["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," ","Spacebar"];
      if (blocked.includes(e.key)) e.preventDefault();
    }, { passive: false });

    window.addEventListener("load", function() {
      window.assetsData = base64ToUint8Array(window.assetsUri.slice(28));

      // Eaglercraft options
      window.minecraftOpts = ["game_frame", ""];

      main();

      // Force focus after startup
      setTimeout(() => {
        window.focus();

        // Try focusing the canvas if it exists
        const c = document.querySelector("canvas");
        if (c) {
          c.setAttribute("tabindex", "0");
          c.focus();
        }
      }, 300);
    });

    // Click anywhere to focus the game
    window.addEventListener("pointerdown", () => {
      window.focus();
      const c = document.querySelector("canvas");
      if (c) c.focus();
    });
  </script>
</head>

<body id="game_frame"></body>
</html>
